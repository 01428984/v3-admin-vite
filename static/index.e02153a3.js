import{a9 as e,b as a,a as l,r as t,e as r,aa as n,o,f as u,R as s,i as d,w as i,h as p,k as c,B as m,z as f,t as g,E as v,ab as h,ac as _,ad as b,ae as w,af as y,ag as k,ah as V,_ as C}from"./index.e1a14bd2.js";const z={class:"app-container"},x={class:"toolbar-wrapper"},P={class:"table-wrapper"},U={class:"pager-wrapper"},B=C(a({__name:"index",setup(a){const C=l(!1),B=l(!1),R=l(null),T=t({username:"",password:""}),j=t({username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}]}),q=()=>{var a;null==(a=R.value)||a.validate((a=>{if(!a)return!1;var l;void 0===E.value?(l={username:T.username,password:T.password},e({url:"table",method:"post",data:l})).then((()=>{v.success("新增成功"),B.value=!1,G()})):function(a){return e({url:"table",method:"put",data:a})}({id:E.value,username:T.username}).then((()=>{v.success("修改成功"),B.value=!1,G()}))}))},F=()=>{E.value=void 0,T.username="",T.password=""},$=a=>{h.confirm(`正在删除用户：${a.username}，确认删除？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var l;(l=a.id,e({url:`table/${l}`,method:"delete"})).then((()=>{v.success("删除成功"),G()}))}))},E=l(void 0),I=l([]),S=l(null),A=t({username:"",phone:""}),D=t({total:0,currentPage:1,size:10}),G=()=>{var a;C.value=!0,(a={currentPage:D.currentPage,size:D.size,username:""===A.username?void 0:A.username,phone:""===A.phone?void 0:A.phone},e({url:"table",method:"get",params:a})).then((e=>{D.total=e.data.total,I.value=e.data.list})).catch((()=>{I.value=[]})).finally((()=>{C.value=!1}))},H=e=>{D.size=e,G()},J=e=>{D.currentPage=e,G()},K=()=>{D.currentPage=1,G()},L=()=>{var e;null==(e=S.value)||e.resetFields(),D.currentPage=1,G()},M=()=>{G()};return G(),(e,a)=>{const l=r("el-input"),t=r("el-form-item"),v=r("el-button"),h=r("el-form"),G=r("el-card"),N=r("el-tooltip"),O=r("el-table-column"),Q=r("el-tag"),W=r("el-table"),X=r("el-pagination"),Y=r("el-dialog"),Z=n("loading");return o(),u("div",z,[s((o(),d(G,{shadow:"never",class:"search-wrapper"},{default:i((()=>[p(h,{ref_key:"searchFormRef",ref:S,inline:!0,model:A},{default:i((()=>[p(t,{prop:"username",label:"用户名"},{default:i((()=>[p(l,{modelValue:A.username,"onUpdate:modelValue":a[0]||(a[0]=e=>A.username=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),p(t,{prop:"phone",label:"手机号"},{default:i((()=>[p(l,{modelValue:A.phone,"onUpdate:modelValue":a[1]||(a[1]=e=>A.phone=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),p(t,null,{default:i((()=>[p(v,{type:"primary",icon:c(_),onClick:K},{default:i((()=>[m("查询")])),_:1},8,["icon"]),p(v,{icon:c(b),onClick:L},{default:i((()=>[m("重置")])),_:1},8,["icon"])])),_:1})])),_:1},8,["model"])])),_:1})),[[Z,C.value]]),s((o(),d(G,{shadow:"never"},{default:i((()=>[f("div",x,[f("div",null,[p(v,{type:"primary",icon:c(w),onClick:a[2]||(a[2]=e=>B.value=!0)},{default:i((()=>[m("新增用户")])),_:1},8,["icon"]),p(v,{type:"danger",icon:c(y)},{default:i((()=>[m("批量删除")])),_:1},8,["icon"])]),f("div",null,[p(N,{content:"下载",effect:"light"},{default:i((()=>[p(v,{type:"primary",icon:c(k),circle:""},null,8,["icon"])])),_:1}),p(N,{content:"刷新表格",effect:"light"},{default:i((()=>[p(v,{type:"primary",icon:c(V),circle:"",onClick:M},null,8,["icon"])])),_:1})])]),f("div",P,[p(W,{data:I.value,"header-cell-class-name":"table-header"},{default:i((()=>[p(O,{type:"selection",width:"50",align:"center"}),p(O,{prop:"username",label:"用户名",align:"center"}),p(O,{prop:"roles",label:"角色",align:"center"},{default:i((e=>["admin"===e.row.roles?(o(),d(Q,{key:0,effect:"plain"},{default:i((()=>[m("admin")])),_:1})):(o(),d(Q,{key:1,type:"warning",effect:"plain"},{default:i((()=>[m(g(e.row.roles),1)])),_:2},1024))])),_:1}),p(O,{prop:"phone",label:"手机号",align:"center"}),p(O,{prop:"email",label:"邮箱",align:"center"}),p(O,{prop:"status",label:"状态",align:"center"},{default:i((e=>[e.row.status?(o(),d(Q,{key:0,type:"success",effect:"plain"},{default:i((()=>[m("启用")])),_:1})):(o(),d(Q,{key:1,type:"danger",effect:"plain"},{default:i((()=>[m("禁用")])),_:1}))])),_:1}),p(O,{prop:"creatTime",label:"创建时间",align:"center"}),p(O,{fixed:"right",label:"操作",width:"150",align:"center"},{default:i((e=>[p(v,{type:"primary",text:"",bg:"",size:"small",onClick:a=>{return l=e.row,E.value=l.id,T.username=l.username,T.password=l.password,void(B.value=!0);var l}},{default:i((()=>[m("修改")])),_:2},1032,["onClick"]),p(v,{type:"danger",text:"",bg:"",size:"small",onClick:a=>$(e.row)},{default:i((()=>[m("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),f("div",U,[p(X,{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50],total:D.total,"page-size":D.size,currentPage:D.currentPage,onSizeChange:H,onCurrentChange:J},null,8,["total","page-size","currentPage"])])])),_:1})),[[Z,C.value]]),p(Y,{modelValue:B.value,"onUpdate:modelValue":a[6]||(a[6]=e=>B.value=e),title:void 0===E.value?"新增用户":"修改服用户",onClose:F},{footer:i((()=>[p(v,{onClick:a[5]||(a[5]=e=>B.value=!1)},{default:i((()=>[m("取消")])),_:1}),p(v,{type:"primary",onClick:q},{default:i((()=>[m("确认")])),_:1})])),default:i((()=>[p(h,{ref_key:"formRef",ref:R,model:T,rules:j,"label-width":"100px","label-position":"left"},{default:i((()=>[p(t,{prop:"username",label:"用户名"},{default:i((()=>[p(l,{modelValue:T.username,"onUpdate:modelValue":a[3]||(a[3]=e=>T.username=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),p(t,{prop:"password",label:"密码"},{default:i((()=>[p(l,{modelValue:T.password,"onUpdate:modelValue":a[4]||(a[4]=e=>T.password=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-c9e86b8c"]]);export{B as default};
