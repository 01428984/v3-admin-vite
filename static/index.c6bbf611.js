import{_ as e,a,i as o,R as l,j as r,r as s,o as n,b as i,e as d,z as t,w as m,Y as c,D as g,G as p,y as u,g as f,Z as x,$ as h,a0 as b,n as w,C as F}from"./index.1df3b806.js";import{_}from"./index.ab6ad5fe.js";const v={class:"login-container"},y={class:"login-card"},V=(e=>(g("data-v-b835fa14"),e=e(),p(),e))((()=>t("div",{class:"title"},[t("img",{src:"./static/logo-text-2.f252b556.png"})],-1))),C={class:"content"},U={class:"show-code"},z=["src"],k=F(" 登 录 ");var j=e(a({__name:"index",setup(e){const a=o(),g=l(),p=r({loading:!1,codeUrl:"",loginForm:{username:"admin",password:"12345678",code:"abcd"},loginRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:16,message:"长度在 8 到 16 个字符",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},handleLogin:()=>{g.value.validate((e=>{if(!e)return!1;p.loading=!0,u().login({username:p.loginForm.username,password:p.loginForm.password}).then((()=>{p.loading=!1,a.push({path:"/"}).catch((e=>{console.warn(e)}))})).catch((()=>{p.loading=!1,p.createCode(),p.loginForm.password=""}))}))},createCode:()=>{p.loginForm.code="",p.codeUrl="/api/v1/login/code?"+1e3*Math.random()}});return(e,a)=>{const o=s("el-input"),l=s("el-form-item"),r=s("el-button"),u=s("el-form");return n(),i("div",v,[d(_,{class:"theme-switch"}),t("div",y,[V,t("div",C,[d(u,{ref_key:"loginFormDom",ref:g,model:p.loginForm,rules:p.loginRules,onKeyup:c(p.handleLogin,["enter"])},{default:m((()=>[d(l,{prop:"username"},{default:m((()=>[d(o,{modelValue:p.loginForm.username,"onUpdate:modelValue":a[0]||(a[0]=e=>p.loginForm.username=e),placeholder:"用户名",type:"text",tabindex:"1","prefix-icon":f(x),size:"large"},null,8,["modelValue","prefix-icon"])])),_:1}),d(l,{prop:"password"},{default:m((()=>[d(o,{modelValue:p.loginForm.password,"onUpdate:modelValue":a[1]||(a[1]=e=>p.loginForm.password=e),placeholder:"密码",type:"password",tabindex:"2","prefix-icon":f(h),size:"large","show-password":""},null,8,["modelValue","prefix-icon"])])),_:1}),d(l,{prop:"code"},{default:m((()=>[d(o,{modelValue:p.loginForm.code,"onUpdate:modelValue":a[2]||(a[2]=e=>p.loginForm.code=e),placeholder:"验证码",type:"text",tabindex:"3","prefix-icon":f(b),maxlength:"4",size:"large"},null,8,["modelValue","prefix-icon"]),t("span",U,[t("img",{src:p.codeUrl,onClick:a[3]||(a[3]=(...e)=>p.createCode&&p.createCode(...e))},null,8,z)])])),_:1}),d(r,{loading:p.loading,type:"primary",size:"large",onClick:w(p.handleLogin,["prevent"])},{default:m((()=>[k])),_:1},8,["loading","onClick"])])),_:1},8,["model","rules","onKeyup"])])])])}}}),[["__scopeId","data-v-b835fa14"]]);export{j as default};
