import{a9 as e,r as a,b as l,a as t,m as r,e as n,aa as o,o as u,f as s,R as d,i,w as p,h as c,k as m,B as g,z as f,t as h,E as v,ab as _,ac as b,ad as y,ae as w,af as C,ag as z,ah as k,_ as V}from"./index.b2caceec.js";const P={total:0,currentPage:1,pageSizes:[10,20,50],pageSize:10,layout:"total, sizes, prev, pager, next, jumper"},S={class:"app-container"},x={class:"toolbar-wrapper"},U={class:"table-wrapper"},j={class:"pager-wrapper"},B=V(l({__name:"index",setup(l){const V=t(!1),{paginationData:B,handleCurrentChange:R,handleSizeChange:T}=((e={})=>{const l=a(Object.assign({...P},e));return{paginationData:l,handleCurrentChange:e=>{l.currentPage=e},handleSizeChange:e=>{l.pageSize=e}}})(),q=t(!1),D=t(null),F=a({username:"",password:""}),$=a({username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}]}),E=()=>{var a;null==(a=D.value)||a.validate((a=>{if(!a)return!1;var l;void 0===A.value?(l={username:F.username,password:F.password},e({url:"table",method:"post",data:l})).then((()=>{v.success("新增成功"),q.value=!1,K()})):function(a){return e({url:"table",method:"put",data:a})}({id:A.value,username:F.username}).then((()=>{v.success("修改成功"),q.value=!1,K()}))}))},I=()=>{A.value=void 0,F.username="",F.password=""},O=a=>{_.confirm(`正在删除用户：${a.username}，确认删除？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var l;(l=a.id,e({url:`table/${l}`,method:"delete"})).then((()=>{v.success("删除成功"),K()}))}))},A=t(void 0),G=t([]),H=t(null),J=a({username:"",phone:""}),K=()=>{var a;V.value=!0,(a={currentPage:B.currentPage,size:B.pageSize,username:""===J.username?void 0:J.username,phone:""===J.phone?void 0:J.phone},e({url:"table",method:"get",params:a})).then((e=>{B.total=e.data.total,G.value=e.data.list})).catch((()=>{G.value=[]})).finally((()=>{V.value=!1}))},L=()=>{1===B.currentPage&&K(),B.currentPage=1},M=()=>{var e;null==(e=H.value)||e.resetFields(),1===B.currentPage&&K(),B.currentPage=1},N=()=>{K()};return r([()=>B.currentPage,()=>B.pageSize],K,{immediate:!0}),(e,a)=>{const l=n("el-input"),t=n("el-form-item"),r=n("el-button"),v=n("el-form"),_=n("el-card"),P=n("el-tooltip"),K=n("el-table-column"),Q=n("el-tag"),W=n("el-table"),X=n("el-pagination"),Y=n("el-dialog"),Z=o("loading");return u(),s("div",S,[d((u(),i(_,{shadow:"never",class:"search-wrapper"},{default:p((()=>[c(v,{ref_key:"searchFormRef",ref:H,inline:!0,model:J},{default:p((()=>[c(t,{prop:"username",label:"用户名"},{default:p((()=>[c(l,{modelValue:J.username,"onUpdate:modelValue":a[0]||(a[0]=e=>J.username=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),c(t,{prop:"phone",label:"手机号"},{default:p((()=>[c(l,{modelValue:J.phone,"onUpdate:modelValue":a[1]||(a[1]=e=>J.phone=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),c(t,null,{default:p((()=>[c(r,{type:"primary",icon:m(b),onClick:L},{default:p((()=>[g("查询")])),_:1},8,["icon"]),c(r,{icon:m(y),onClick:M},{default:p((()=>[g("重置")])),_:1},8,["icon"])])),_:1})])),_:1},8,["model"])])),_:1})),[[Z,V.value]]),d((u(),i(_,{shadow:"never"},{default:p((()=>[f("div",x,[f("div",null,[c(r,{type:"primary",icon:m(w),onClick:a[2]||(a[2]=e=>q.value=!0)},{default:p((()=>[g("新增用户")])),_:1},8,["icon"]),c(r,{type:"danger",icon:m(C)},{default:p((()=>[g("批量删除")])),_:1},8,["icon"])]),f("div",null,[c(P,{content:"下载"},{default:p((()=>[c(r,{type:"primary",icon:m(z),circle:""},null,8,["icon"])])),_:1}),c(P,{content:"刷新表格"},{default:p((()=>[c(r,{type:"primary",icon:m(k),circle:"",onClick:N},null,8,["icon"])])),_:1})])]),f("div",U,[c(W,{data:G.value,"header-cell-class-name":"table-header"},{default:p((()=>[c(K,{type:"selection",width:"50",align:"center"}),c(K,{prop:"username",label:"用户名",align:"center"}),c(K,{prop:"roles",label:"角色",align:"center"},{default:p((e=>["admin"===e.row.roles?(u(),i(Q,{key:0,effect:"plain"},{default:p((()=>[g("admin")])),_:1})):(u(),i(Q,{key:1,type:"warning",effect:"plain"},{default:p((()=>[g(h(e.row.roles),1)])),_:2},1024))])),_:1}),c(K,{prop:"phone",label:"手机号",align:"center"}),c(K,{prop:"email",label:"邮箱",align:"center"}),c(K,{prop:"status",label:"状态",align:"center"},{default:p((e=>[e.row.status?(u(),i(Q,{key:0,type:"success",effect:"plain"},{default:p((()=>[g("启用")])),_:1})):(u(),i(Q,{key:1,type:"danger",effect:"plain"},{default:p((()=>[g("禁用")])),_:1}))])),_:1}),c(K,{prop:"createTime",label:"创建时间",align:"center"}),c(K,{fixed:"right",label:"操作",width:"150",align:"center"},{default:p((e=>[c(r,{type:"primary",text:"",bg:"",size:"small",onClick:a=>{return l=e.row,A.value=l.id,F.username=l.username,F.password=l.password,void(q.value=!0);var l}},{default:p((()=>[g("修改")])),_:2},1032,["onClick"]),c(r,{type:"danger",text:"",bg:"",size:"small",onClick:a=>O(e.row)},{default:p((()=>[g("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),f("div",j,[c(X,{background:"",layout:m(B).layout,"page-sizes":m(B).pageSizes,total:m(B).total,"page-size":m(B).pageSize,currentPage:m(B).currentPage,onSizeChange:m(T),onCurrentChange:m(R)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])),_:1})),[[Z,V.value]]),c(Y,{modelValue:q.value,"onUpdate:modelValue":a[6]||(a[6]=e=>q.value=e),title:void 0===A.value?"新增用户":"修改用户",onClose:I,width:"30%"},{footer:p((()=>[c(r,{onClick:a[5]||(a[5]=e=>q.value=!1)},{default:p((()=>[g("取消")])),_:1}),c(r,{type:"primary",onClick:E},{default:p((()=>[g("确认")])),_:1})])),default:p((()=>[c(v,{ref_key:"formRef",ref:D,model:F,rules:$,"label-width":"100px","label-position":"left"},{default:p((()=>[c(t,{prop:"username",label:"用户名"},{default:p((()=>[c(l,{modelValue:F.username,"onUpdate:modelValue":a[3]||(a[3]=e=>F.username=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),c(t,{prop:"password",label:"密码"},{default:p((()=>[c(l,{modelValue:F.password,"onUpdate:modelValue":a[4]||(a[4]=e=>F.password=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-855df847"]]);export{B as default};
