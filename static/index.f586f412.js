import{c as e,u as a,d as l,g as r}from"./table.7f8fd0d9.js";import{r as n,b as t,a as o,m as u,f as s,Q as i,i as d,w as p,h as c,e as m,a9 as g,o as f,j as v,aa as h,B as _,ab as y,z as b,ac as w,ad as C,ae as z,af as k,t as V,E as P,ag as S,_ as x}from"./index.f63516f1.js";const j={total:0,currentPage:1,pageSizes:[10,20,50],pageSize:10,layout:"total, sizes, prev, pager, next, jumper"},U={class:"app-container"},B={class:"toolbar-wrapper"},T={class:"table-wrapper"},q={class:"pager-wrapper"},D=x(t({__name:"index",setup(t){const x=o(!1),{paginationData:D,handleCurrentChange:F,handleSizeChange:R}=((e={})=>{const a=n(Object.assign({...j},e));return{paginationData:a,handleCurrentChange:e=>{a.currentPage=e},handleSizeChange:e=>{a.pageSize=e}}})(),E=o(!1),I=o(null),O=n({username:"",password:""}),Q=n({username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}]}),$=()=>{var l;null==(l=I.value)||l.validate((l=>{if(!l)return!1;void 0===G.value?e({username:O.username,password:O.password}).then((()=>{P.success("新增成功"),E.value=!1,L()})):a({id:G.value,username:O.username}).then((()=>{P.success("修改成功"),E.value=!1,L()}))}))},A=()=>{G.value=void 0,O.username="",O.password=""},G=o(void 0),H=o([]),J=o(null),K=n({username:"",phone:""}),L=()=>{x.value=!0,r({currentPage:D.currentPage,size:D.pageSize,username:K.username||void 0,phone:K.phone||void 0}).then((e=>{D.total=e.data.total,H.value=e.data.list})).catch((()=>{H.value=[]})).finally((()=>{x.value=!1}))},M=()=>{1===D.currentPage&&L(),D.currentPage=1},N=()=>{var e;null==(e=J.value)||e.resetFields(),1===D.currentPage&&L(),D.currentPage=1},W=()=>{L()};return u([()=>D.currentPage,()=>D.pageSize],L,{immediate:!0}),(e,a)=>{const r=m("el-input"),n=m("el-form-item"),t=m("el-button"),o=m("el-form"),u=m("el-card"),j=m("el-tooltip"),X=m("el-table-column"),Y=m("el-tag"),Z=m("el-table"),ee=m("el-pagination"),ae=m("el-dialog"),le=g("loading");return f(),s("div",U,[i((f(),d(u,{shadow:"never",class:"search-wrapper"},{default:p((()=>[c(o,{ref_key:"searchFormRef",ref:J,inline:!0,model:K},{default:p((()=>[c(n,{prop:"username",label:"用户名"},{default:p((()=>[c(r,{modelValue:K.username,"onUpdate:modelValue":a[0]||(a[0]=e=>K.username=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),c(n,{prop:"phone",label:"手机号"},{default:p((()=>[c(r,{modelValue:K.phone,"onUpdate:modelValue":a[1]||(a[1]=e=>K.phone=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),c(n,null,{default:p((()=>[c(t,{type:"primary",icon:v(h),onClick:M},{default:p((()=>[_("查询")])),_:1},8,["icon"]),c(t,{icon:v(y),onClick:N},{default:p((()=>[_("重置")])),_:1},8,["icon"])])),_:1})])),_:1},8,["model"])])),_:1})),[[le,x.value]]),i((f(),d(u,{shadow:"never"},{default:p((()=>[b("div",B,[b("div",null,[c(t,{type:"primary",icon:v(w),onClick:a[2]||(a[2]=e=>E.value=!0)},{default:p((()=>[_("新增用户")])),_:1},8,["icon"]),c(t,{type:"danger",icon:v(C)},{default:p((()=>[_("批量删除")])),_:1},8,["icon"])]),b("div",null,[c(j,{content:"下载"},{default:p((()=>[c(t,{type:"primary",icon:v(z),circle:""},null,8,["icon"])])),_:1}),c(j,{content:"刷新表格"},{default:p((()=>[c(t,{type:"primary",icon:v(k),circle:"",onClick:W},null,8,["icon"])])),_:1})])]),b("div",T,[c(Z,{data:H.value,"header-cell-class-name":"table-header"},{default:p((()=>[c(X,{type:"selection",width:"50",align:"center"}),c(X,{prop:"username",label:"用户名",align:"center"}),c(X,{prop:"roles",label:"角色",align:"center"},{default:p((e=>["admin"===e.row.roles?(f(),d(Y,{key:0,effect:"plain"},{default:p((()=>[_("admin")])),_:1})):(f(),d(Y,{key:1,type:"warning",effect:"plain"},{default:p((()=>[_(V(e.row.roles),1)])),_:2},1024))])),_:1}),c(X,{prop:"phone",label:"手机号",align:"center"}),c(X,{prop:"email",label:"邮箱",align:"center"}),c(X,{prop:"status",label:"状态",align:"center"},{default:p((e=>[e.row.status?(f(),d(Y,{key:0,type:"success",effect:"plain"},{default:p((()=>[_("启用")])),_:1})):(f(),d(Y,{key:1,type:"danger",effect:"plain"},{default:p((()=>[_("禁用")])),_:1}))])),_:1}),c(X,{prop:"createTime",label:"创建时间",align:"center"}),c(X,{fixed:"right",label:"操作",width:"150",align:"center"},{default:p((e=>[c(t,{type:"primary",text:"",bg:"",size:"small",onClick:a=>{return l=e.row,G.value=l.id,O.username=l.username,O.password=l.password,void(E.value=!0);var l}},{default:p((()=>[_("修改")])),_:2},1032,["onClick"]),c(t,{type:"danger",text:"",bg:"",size:"small",onClick:a=>{return r=e.row,void S.confirm(`正在删除用户：${r.username}，确认删除？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{l(r.id).then((()=>{P.success("删除成功"),L()}))}));var r}},{default:p((()=>[_("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),b("div",q,[c(ee,{background:"",layout:v(D).layout,"page-sizes":v(D).pageSizes,total:v(D).total,"page-size":v(D).pageSize,currentPage:v(D).currentPage,onSizeChange:v(R),onCurrentChange:v(F)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])),_:1})),[[le,x.value]]),c(ae,{modelValue:E.value,"onUpdate:modelValue":a[6]||(a[6]=e=>E.value=e),title:void 0===G.value?"新增用户":"修改用户",onClose:A,width:"30%"},{footer:p((()=>[c(t,{onClick:a[5]||(a[5]=e=>E.value=!1)},{default:p((()=>[_("取消")])),_:1}),c(t,{type:"primary",onClick:$},{default:p((()=>[_("确认")])),_:1})])),default:p((()=>[c(o,{ref_key:"formRef",ref:I,model:O,rules:Q,"label-width":"100px","label-position":"left"},{default:p((()=>[c(n,{prop:"username",label:"用户名"},{default:p((()=>[c(r,{modelValue:O.username,"onUpdate:modelValue":a[3]||(a[3]=e=>O.username=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),c(n,{prop:"password",label:"密码"},{default:p((()=>[c(r,{modelValue:O.password,"onUpdate:modelValue":a[4]||(a[4]=e=>O.password=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-a4e45f36"]]);export{D as default};
